# 6.5 Priority queues
## 6.5-1
```
\documentclass{standalone}
\usepackage{tikz}

\begin{document}
\begin{tikzpicture}[level/.style={sibling distance=30mm/#1},
treenode/.style={align=center, inner sep=0pt, text width=1.2em, text centered},
current/.style={fill=gray}]
    \node [circle,draw,treenode,current] {15}
      child {
        node [circle,draw,treenode] {13}
        child {
            node [circle,draw,treenode] {5}
            child {
                node [circle,draw,treenode] {4}
            }
            child {
                node [circle,draw,treenode] {0}
            }}
        child {
            node [circle,draw,treenode] {12}
            child {
                node [circle,draw,treenode] {6}
            }
            child {
                node [circle,draw,treenode] {2}
            }
        }
      }
      child {
        node [circle,draw,treenode] {9}
        child {
            node [circle,draw,treenode] {8}
            child {
                node [circle,draw,treenode] {1}
            }
            child [missing] {}
        }
        child {
            node [circle,draw,treenode]  {7}
        }
    };
    \end{tikzpicture}
\end{document}
```

![Alt text](./6.5-1-a.png)

![Alt text](./6.5-1-b.png)

![Alt text](./6.5-1-c.png)

## 6.5-2
```
\documentclass{standalone}
\usepackage{tikz}

\begin{document}
\begin{tikzpicture}[level/.style={sibling distance=30mm/#1},
treenode/.style={align=center, inner sep=0pt, text width=1.2em, text centered},
current/.style={fill=gray}]
    \node [circle,draw,treenode] {15}
      child {
        node [circle,draw,treenode] {13}
        child {
            node [circle,draw,treenode] {5}
            child {
                node [circle,draw,treenode] {4}
            }
            child {
                node [circle,draw,treenode] {0}
            }}
        child {
            node [circle,draw,treenode] {12}
            child {
                node [circle,draw,treenode] {6}
            }
            child {
                node [circle,draw,treenode] {2}
            }
        }
      }
      child {
        node [circle,draw,treenode] {9}
        child {
            node [circle,draw,treenode] {8}
            child {
                node [circle,draw,treenode] {1}
            }
            child [missing] {}
        }
        child {
            node [circle,draw,treenode]  {7}
        }
    };
    \end{tikzpicture}
\end{document}
```

![Alt text](./6.5-2-a.png)

![Alt text](./6.5-2-b.png)

![Alt text](./6.5-2-c.png)

![Alt text](./6.5-2-d.png)

## 6.5-3
```
HEAP-MINIMUM(A)
    return A[1]
```

```
HEAP-EXTRACT-MIN(A)
    if A.heap-size < 1
        error "heap underflow"
    min = A[1]
    A[1] = A[A.heap-size]
    A.heap-size = A.heap-size - 1
    MIN-HEAPIFY(A, 1)
    return max
```

```
HEAP-DECREASE-KEY(A, i, key)
    if key > A[i]
        error "new key is bigger than current key"
    A[i] = key
    while i > 1 and A[PARENT(i)] > A[i]
        exchange A[i] with A[PARENT(i)]
        i = PARENT(i)
```

```
MIN-HEAP-INSERT(A, key)
    A.heap-size = A.heap-size + 1
    A[A.heap-size] = +âˆž
    HEAP-DECREASE-KEY(A, A.heap-size, key)
```

## 6.5-4
Setting the key of the inserted node to negative infinity to make sure it can pass the truth check in line 1 of HEAP-INCREASE-KEY(A, i, key).

## 6.5-5
**Initialization**: Prior to the first iteration of the loop, the subarray A[1..A.heap-size] is satifies the max-heap before we set `A[i] = key`, after we set `A[i] = key`, it's possible that A[i] would be greater than its parent. And we cannot set a smaller key to A[i], so there may be only one violation.

**Maintenance**: In the for loop, we are exchanging A[i] and A[PARENT(i)], before the exchange, the subtree rooted at A[i] is a max-heap, but it may be greater than its parent, so there may be on violation.

**Termination**: When it's terminated, i maybe 1 or A[i] is smaller thant its parent, either makes A a max-heap.

## 6.5-6
